<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Para ti</title>
  <!-- Tipografías: manuscrita + sans elegante + serif -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;500;600;700&family=Cormorant+Garamond:ital,wght@0,500;0,600;1,400;1,500&family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet" />
  <style>
    /* ── Variables globales ── */
    :root {
      --bg: #fbfaf7;
      --card: rgba(255,255,255,0.82);
      --text: #1a1a1a;
      --muted: #6b6b6b;
      --accent: #c7a27c;
      --accent-soft: rgba(199,162,124,0.30);
      --shadow: 0 12px 48px rgba(0,0,0,0.06);
      --radius: 22px;
      --hand: 'Caveat', cursive;     /* Fuente manuscrita */
      --sans: 'Outfit', sans-serif;
      --serif: 'Cormorant Garamond', Georgia, serif;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: var(--sans);
      color: var(--text);
      background: var(--bg);
      min-height: 100vh;
      display: grid;
      place-items: center;
      overflow-x: hidden;
    }

    /* ── Canvas de constelaciones ── */
    canvas {
      position: fixed;
      inset: 0;
      z-index: 0;
      opacity: 0.30;
      transition: opacity 1.5s ease;
    }
    canvas.bright { opacity: 0.45; }

    /* ══════════════════════════════════
       PANTALLA DE INICIO
       ══════════════════════════════════ */
    .intro {
      position: fixed;
      inset: 0;
      z-index: 10;
      display: grid;
      place-items: center;
      background: var(--bg);
      transition: opacity 0.9s ease, visibility 0.9s ease;
    }
    .intro.hidden {
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
    }
    .intro-inner { text-align: center; }

    /* Texto "de Oscar / para Ari" */
    .intro-label {
      margin-bottom: 36px;
      opacity: 0;
      animation: softIn 1.2s ease 0.2s both;
    }
    .intro-label .from {
      display: block;
      font-family: var(--sans);
      font-size: 11px;
      font-weight: 400;
      letter-spacing: 0.25em;
      text-transform: uppercase;
      color: var(--muted);
    }
    .intro-label .divider {
      display: block;
      width: 32px;
      height: 1px;
      background: var(--accent);
      margin: 12px auto;
      opacity: 0;
      animation: lineGrow 0.8s ease 0.7s both;
    }
    @keyframes lineGrow {
      from { width: 0; opacity: 0; }
      to   { width: 32px; opacity: 0.6; }
    }
    .intro-label .to {
      display: block;
      font-family: var(--hand);
      font-size: 36px;
      font-weight: 600;
      letter-spacing: 0.02em;
      color: var(--text);
      opacity: 0;
      animation: softIn 1s ease 0.9s both;
    }

    /* ── Botón Comenzar — estilo líquido ── */
    .btn-liquid {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 140px;
      height: 140px;
      font-family: var(--sans);
      font-size: 13px;
      font-weight: 500;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--text);
      background: transparent;
      border: none;
      cursor: pointer;
      opacity: 0;
      animation: softIn 1s ease 0.6s both;
    }
    .btn-liquid:focus { outline: none; }
    .btn-liquid span {
      position: relative;
      z-index: 3;
      transition: transform 0.3s ease, letter-spacing 0.4s ease;
    }
    .btn-liquid:hover span { letter-spacing: 0.18em; }
    .btn-liquid:active span { transform: scale(0.96); }

    /* Blob exterior */
    .btn-liquid::before {
      content: '';
      position: absolute;
      inset: -8px;
      background: linear-gradient(135deg, var(--accent-soft) 0%, rgba(199,162,124,0.18) 40%, var(--accent-soft) 100%);
      border-radius: 62% 38% 46% 54% / 48% 58% 42% 52%;
      animation: blobOuter 7s ease-in-out infinite;
      z-index: 0;
    }
    /* Blob interior */
    .btn-liquid::after {
      content: '';
      position: absolute;
      inset: 4px;
      background: rgba(255,255,255,0.85);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-radius: 58% 42% 50% 50% / 52% 48% 52% 48%;
      animation: blobInner 6s ease-in-out infinite;
      z-index: 1;
    }
    .btn-liquid:hover::before { animation-duration: 3.5s; }
    .btn-liquid:hover::after  { animation-duration: 3s; }

    @keyframes blobOuter {
      0%, 100% { border-radius: 62% 38% 46% 54% / 48% 58% 42% 52%; transform: rotate(0deg); }
      25%      { border-radius: 44% 56% 60% 40% / 56% 44% 56% 44%; }
      50%      { border-radius: 56% 44% 38% 62% / 44% 56% 44% 56%; transform: rotate(3deg); }
      75%      { border-radius: 38% 62% 56% 44% / 58% 42% 58% 42%; }
    }
    @keyframes blobInner {
      0%, 100% { border-radius: 58% 42% 50% 50% / 52% 48% 52% 48%; }
      33%      { border-radius: 50% 50% 42% 58% / 48% 52% 48% 52%; }
      66%      { border-radius: 42% 58% 58% 42% / 52% 48% 52% 48%; }
    }

    /* ══════════════════════════════════
       CONTENIDO PRINCIPAL
       ══════════════════════════════════ */
    .wrap {
      position: relative;
      z-index: 1;
      width: min(560px, 92vw);
      padding: 24px;
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.9s cubic-bezier(0.22, 1, 0.36, 1),
                  transform 0.9s cubic-bezier(0.22, 1, 0.36, 1);
    }
    .wrap.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .card {
      position: relative;
      overflow: hidden;
      background: var(--card);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border: 1px solid rgba(31,41,55,0.05);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 36px 30px 28px;
    }

    /* ── Kicker ── */
    .kicker {
      font-family: var(--sans);
      font-size: 11px;
      font-weight: 400;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 16px;
      min-height: 1.4em;
    }

    /* ── Título principal — fuente manuscrita ── */
    h1 {
      font-family: var(--hand);
      font-size: clamp(30px, 5.5vw, 46px);
      font-weight: 600;
      line-height: 1.25;
      letter-spacing: 0.01em;
      min-height: 1.3em;
    }
    h1.alive {
      animation: breathe 4.5s ease-in-out infinite;
    }
    @keyframes breathe {
      0%, 100% { transform: translateY(0); }
      50%      { transform: translateY(-3px); }
    }

    /* ── Cursor de escritura (pluma) ── */
    .cursor {
      display: inline-block;
      width: 2px;
      height: 0.85em;
      background: var(--accent);
      margin-left: 1px;
      vertical-align: text-bottom;
      border-radius: 1px;
      animation: cursorBlink 0.8s ease-in-out infinite;
    }
    .cursor.hidden { display: none; }
    @keyframes cursorBlink {
      0%, 100% { opacity: 1; }
      50%      { opacity: 0.15; }
    }

    /* ── Nota (manuscrita también) ── */
    .note {
      font-family: var(--hand);
      font-weight: 400;
      font-size: 22px;
      line-height: 1.5;
      color: var(--muted);
      margin-top: 18px;
      min-height: 1.5em;
      max-width: 46ch;
    }

    /* ══════════════════════════════════
       CORAZÓN con "matatita y pollito"
       Se dibuja con stroke-dashoffset
       ══════════════════════════════════ */
    .heart-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 28px;
      opacity: 0;
      transform: translateY(12px);
      transition: opacity 0.8s ease, transform 0.8s ease;
    }
    .heart-section.visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* El SVG del corazón que se traza */
    .heart-svg {
      width: 80px;
      height: 72px;
      overflow: visible;
    }
    .heart-svg .heart-path {
      fill: none;
      stroke: var(--accent);
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-dasharray: 200;
      stroke-dashoffset: 200;
      transition: stroke-dashoffset 2.2s cubic-bezier(0.22, 1, 0.36, 1);
    }
    .heart-section.visible .heart-path {
      stroke-dashoffset: 0;
    }
    /* Relleno suave que aparece después del trazo */
    .heart-svg .heart-fill {
      fill: rgba(199,162,124,0.10);
      opacity: 0;
      transition: opacity 0.8s ease 1.8s;
    }
    .heart-section.visible .heart-fill {
      opacity: 1;
    }

    /* Texto dentro/debajo del corazón */
    .heart-names {
      font-family: var(--hand);
      font-size: 18px;
      font-weight: 500;
      color: var(--accent);
      margin-top: 8px;
      opacity: 0;
      transition: opacity 0.8s ease 2s;
    }
    .heart-section.visible .heart-names {
      opacity: 1;
    }
    .heart-names .y {
      font-family: var(--serif);
      font-style: italic;
      font-weight: 400;
      font-size: 15px;
      color: var(--muted);
      margin: 0 4px;
    }

    /* Animación flotante sutil del corazón completo */
    .heart-section.visible .heart-float {
      animation: heartFloat 4s ease-in-out infinite;
    }
    @keyframes heartFloat {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50%      { transform: translateY(-5px) rotate(1.5deg); }
    }

    /* ── Fila con botón y fecha ── */
    .actions {
      display: flex;
      align-items: center;
      gap: 14px;
      margin-top: 24px;
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }
    .actions.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .btn-reveal {
      border: 1px solid rgba(31,41,55,0.10);
      background: rgba(255,255,255,0.55);
      color: var(--text);
      padding: 11px 18px;
      border-radius: 999px;
      cursor: pointer;
      font-family: var(--sans);
      font-weight: 500;
      font-size: 14px;
      letter-spacing: 0.03em;
      transition: all 0.3s ease;
    }
    .btn-reveal:hover {
      background: rgba(255,255,255,0.92);
      box-shadow: 0 4px 20px rgba(0,0,0,0.06);
      transform: translateY(-1px);
    }
    .btn-reveal:active { transform: scale(0.98) translateY(0); }

    .stamp {
      font-family: var(--sans);
      font-size: 11px;
      font-weight: 400;
      color: var(--muted);
      letter-spacing: 0.02em;
      opacity: 0.7;
    }

    /* ── Reveal (mensaje extra) ── */
    .reveal {
      overflow: hidden;
      max-height: 0;
      opacity: 0;
      margin-top: 0;
      transition: max-height 0.6s cubic-bezier(0.22, 1, 0.36, 1),
                  opacity 0.5s ease 0.1s,
                  margin-top 0.4s ease;
    }
    .reveal.show {
      max-height: 300px;
      opacity: 1;
      margin-top: 16px;
    }
    .reveal-inner {
      padding-top: 18px;
      border-top: 1px dashed rgba(31,41,55,0.10);
    }

    /* ── 11:11 dentro del corazón SVG ──
       Aparece después del trazo, brilla y luego será movido por JS */
    .heart-eleven {
      font-family: 'Caveat', cursive;
      font-size: 12px;
      font-weight: 700;
      fill: var(--accent);
      opacity: 0;
    }
    .heart-section.visible .heart-eleven {
      animation: elevenPulse 3s ease 2s both;
    }
    @keyframes elevenPulse {
      0%   { opacity: 0; }
      25%  { opacity: 1; }
      75%  { opacity: 1; }
      100% { opacity: 0; }
    }

    /* ── 11:11 viajero: aparece/desaparece subiendo hasta el top ── */
    .eleven-traveler {
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      z-index: 20;
      font-family: var(--hand);
      font-size: 20px;
      font-weight: 700;
      color: var(--accent);
      pointer-events: none;
      opacity: 0;
      transition: none;
    }
    /* Estado final: se queda arriba brillando */
    .eleven-traveler.settled {
      opacity: 1;
      text-shadow: 0 0 18px rgba(199,162,124,0.5),
                   0 0 40px rgba(199,162,124,0.25);
      animation: skyPulse 3s ease-in-out infinite;
    }
    @keyframes skyPulse {
      0%, 100% { text-shadow: 0 0 18px rgba(199,162,124,0.5), 0 0 40px rgba(199,162,124,0.25); opacity: 1; }
      50%      { text-shadow: 0 0 24px rgba(199,162,124,0.7), 0 0 56px rgba(199,162,124,0.4); opacity: 0.8; }
    }

    /* ── Animaciones utilitarias ── */
    @keyframes softIn {
      from { opacity: 0; transform: translateY(12px); }
      to   { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <canvas id="stars"></canvas>

  <!-- 11:11 viajero que sube iteración a iteración -->
  <span class="eleven-traveler" id="elevenTraveler">11:11</span>

  <!-- ═══ PANTALLA DE INICIO ═══ -->
  <div class="intro" id="intro">
    <div class="intro-inner">
      <div class="intro-label">
        <span class="from">de Oscar</span>
        <span class="divider"></span>
        <span class="to">para Ari</span>
      </div>
      <button type="button" class="btn-liquid" id="btnStart">
        <span>Comenzar</span>
      </button>
    </div>
  </div>

  <!-- ═══ CONTENIDO PRINCIPAL ═══ -->
  <div class="wrap" id="wrap">
    <div class="card">
      <p class="kicker" id="kicker"></p>

      <h1 id="msg"></h1>

      <p class="note" id="note"></p>

      <div class="actions" id="actions">
        <button type="button" class="btn-reveal" id="btnReveal">Sorpresa mia</button>
        <span class="stamp" id="stamp"></span>
      </div>

      <!-- Corazón + "matatita y pollito" se revela al presionar el botón -->
      <div class="reveal" id="reveal">
        <div class="reveal-inner">
          <div class="heart-section" id="heartSection">
            <div class="heart-float">
              <svg class="heart-svg" viewBox="0 0 64 60" xmlns="http://www.w3.org/2000/svg">
                <path class="heart-fill"
                  d="M32 56 C32 56 4 36 4 18 C4 8 12 2 20 2 C26 2 30 6 32 10 C34 6 38 2 44 2 C52 2 60 8 60 18 C60 36 32 56 32 56Z"/>
                <path class="heart-path"
                  d="M32 56 C32 56 4 36 4 18 C4 8 12 2 20 2 C26 2 30 6 32 10 C34 6 38 2 44 2 C52 2 60 8 60 18 C60 36 32 56 32 56Z"/>
                <!-- 11:11 centrado visualmente dentro del corazón -->
                <text class="heart-eleven" x="32" y="28" text-anchor="middle" dominant-baseline="central">11:11</text>
              </svg>
            </div>
            <span class="heart-names">
              matatita <span class="y">&</span> pollito
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    /* ══════════════════════════════════
       CONFIGURACIÓN DE TEXTOS
       ══════════════════════════════════ */
    const TEXTS = {
      kicker:  "solo quería decirte",
      title:   "Siempre estaré para ti en todo momento.",
      note:    "Me gusta compartir la vida contigo."
    };

    /* ── Referencias al DOM ── */
    const intro        = document.getElementById("intro");
    const wrap         = document.getElementById("wrap");
    const kicker       = document.getElementById("kicker");
    const msg          = document.getElementById("msg");
    const note         = document.getElementById("note");
    const actions      = document.getElementById("actions");
    const heartSection = document.getElementById("heartSection");
    const btnReveal    = document.getElementById("btnReveal");
    const reveal       = document.getElementById("reveal");
    const stampEl      = document.getElementById("stamp");
    const canvas       = document.getElementById("stars");

    /* ══════════════════════════════════
       TYPEWRITER — Escribe texto como trazos a mano
       Cada letra aparece con un micro-delay variable
       que simula el ritmo natural de escribir a mano.
       Las pausas son más largas en comas y puntos.
       ══════════════════════════════════ */
    function typewrite(el, text, speed = 55) {
      return new Promise(resolve => {
        const cursorSpan = document.createElement("span");
        cursorSpan.className = "cursor";
        el.textContent = "";
        el.appendChild(cursorSpan);

        let i = 0;
        function tick() {
          if (i < text.length) {
            // Crear un span por cada letra para poder animarla individualmente
            const charSpan = document.createElement("span");
            charSpan.textContent = text[i];
            charSpan.style.display = "inline-block";
            charSpan.style.opacity = "0";
            charSpan.style.transform = "translateY(6px)";
            charSpan.style.transition = "opacity 0.25s ease, transform 0.3s ease";
            // Espacios no necesitan inline-block (rompe el wrap)
            if (text[i] === " ") {
              charSpan.style.display = "inline";
              charSpan.style.transform = "none";
              charSpan.style.opacity = "1";
            }
            el.insertBefore(charSpan, cursorSpan);

            // Trigger reflow y animar entrada
            requestAnimationFrame(() => {
              charSpan.style.opacity = "1";
              charSpan.style.transform = "translateY(0)";
            });

            const char = text[i];
            i++;

            // Pausas variables: más lenta en puntuación, jitter humano
            let delay = speed + (Math.random() * 25 - 12);
            if (char === "," || char === ";") delay += 120;
            if (char === "." || char === "!" || char === "?") delay += 180;

            setTimeout(tick, delay);
          } else {
            setTimeout(() => {
              cursorSpan.classList.add("hidden");
              resolve();
            }, 700);
          }
        }
        tick();
      });
    }

    /* ══════════════════════════════════
       SECUENCIA PRINCIPAL
       ══════════════════════════════════ */
    document.getElementById("btnStart").addEventListener("click", async () => {
      // 1. Ocultar intro
      intro.classList.add("hidden");

      // 2. Mostrar card
      await sleep(400);
      wrap.classList.add("visible");
      canvas.classList.add("bright");

      // 3. Escribir kicker
      await sleep(500);
      await typewrite(kicker, TEXTS.kicker, 35);

      // 4. Escribir título (más lento, protagonista)
      await sleep(300);
      await typewrite(msg, TEXTS.title, 55);
      msg.classList.add("alive");

      // 5. Escribir nota
      await sleep(400);
      await typewrite(note, TEXTS.note, 40);

      // 7. Mostrar botón y fecha
      await sleep(500);
      stampEl.textContent = new Date().toLocaleDateString("es-MX", {
        year: "numeric", month: "long", day: "numeric"
      });
      actions.classList.add("visible");
    });

    /* ── Reveal: muestra el corazón con "matatita y pollito" ── */
    const elevenEl = document.getElementById("elevenTraveler");

    btnReveal.addEventListener("click", () => {
      const isOpen = reveal.classList.toggle("show");
      if (isOpen) {
        setTimeout(() => {
          heartSection.classList.add("visible");
        }, 200);

        // Después de que el 11:11 del corazón se desvanece (~5s),
        // iniciar la secuencia de apariciones que suben
        setTimeout(startElevenJourney, 5500);
      }
      btnReveal.textContent = isOpen ? "listo" : "Sorpresa mia";
    });

    /* ══════════════════════════════════
       11:11 JOURNEY — Aparece y desaparece subiendo
       Cada iteración aparece más arriba en la pantalla,
       con posición horizontal aleatoria. En la última
       iteración se queda fijo arriba brillando.
       ══════════════════════════════════ */
    function startElevenJourney() {
      const steps = 6;           // Cantidad de apariciones antes de llegar al top
      const startY = 75;         // Empieza al 75% de la pantalla (abajo)
      const endY = 3;            // Termina al 3% (arriba)
      let step = 0;

      function hop() {
        // Progreso de 0 a 1
        const t = step / (steps - 1);
        // Posición vertical: de startY% a endY% (sube)
        const yPercent = startY - (startY - endY) * t;
        // Posición horizontal: aleatoria pero centrada (30%-70%)
        const xPercent = 30 + Math.random() * 40;
        // Tamaño crece ligeramente conforme sube
        const size = 17 + t * 7;

        elevenEl.style.top = yPercent + "vh";
        elevenEl.style.left = xPercent + "%";
        elevenEl.style.fontSize = size + "px";
        elevenEl.style.transform = "translateX(-50%)";

        // Fade in
        elevenEl.style.transition = "opacity 0.5s ease";
        elevenEl.style.opacity = "0";
        requestAnimationFrame(() => {
          elevenEl.style.opacity = String(0.55 + t * 0.45); // Cada vez más visible
        });

        if (step < steps - 1) {
          // Desaparecer después de un momento, luego saltar al siguiente
          setTimeout(() => {
            elevenEl.style.transition = "opacity 0.6s ease";
            elevenEl.style.opacity = "0";
            step++;
            setTimeout(hop, 800); // Pausa antes de la siguiente aparición
          }, 1400);
        } else {
          // Última iteración: centrar arriba y quedarse brillando
          setTimeout(() => {
            elevenEl.style.transition = "all 1s ease";
            elevenEl.style.left = "50%";
            elevenEl.style.top = "20px";
            elevenEl.style.opacity = "1";
            setTimeout(() => {
              elevenEl.classList.add("settled");
            }, 1000);
          }, 600);
        }
      }

      hop();
    }

    /* ── Utilidad ── */
    function sleep(ms) {
      return new Promise(r => setTimeout(r, ms));
    }

    /* ══════════════════════════════════
       CANVAS — Constelaciones animadas
       ══════════════════════════════════ */
    const ctx = canvas.getContext("2d");
    let W, H, dots;

    function resize() {
      W = canvas.width  = window.innerWidth  * devicePixelRatio;
      H = canvas.height = window.innerHeight * devicePixelRatio;
      dots = Array.from({ length: 70 }, () => ({
        x:  Math.random() * W,
        y:  Math.random() * H,
        r:  (Math.random() * 1.2 + 0.4) * devicePixelRatio,
        vx: (Math.random() * 0.22 - 0.11) * devicePixelRatio,
        vy: (Math.random() * 0.22 - 0.11) * devicePixelRatio
      }));
    }
    window.addEventListener("resize", resize);
    resize();

    function loop() {
      ctx.clearRect(0, 0, W, H);

      for (const p of dots) {
        p.x += p.vx;
        p.y += p.vy;
        if (p.x < 0) p.x = W;
        if (p.x > W) p.x = 0;
        if (p.y < 0) p.y = H;
        if (p.y > H) p.y = 0;

        ctx.beginPath();
        ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
        ctx.fillStyle = "rgba(31,41,55,0.22)";
        ctx.fill();
      }

      const maxDist = 140 * devicePixelRatio;
      for (let i = 0; i < dots.length; i++) {
        for (let j = i + 1; j < dots.length; j++) {
          const a = dots[i], b = dots[j];
          const dist = Math.hypot(a.x - b.x, a.y - b.y);
          if (dist < maxDist) {
            const alpha = (1 - dist / maxDist) * 0.10;
            ctx.strokeStyle = `rgba(199,162,124,${alpha})`;
            ctx.lineWidth = 1 * devicePixelRatio;
            ctx.beginPath();
            ctx.moveTo(a.x, a.y);
            ctx.lineTo(b.x, b.y);
            ctx.stroke();
          }
        }
      }

      requestAnimationFrame(loop);
    }
    loop();
  </script>
</body>
</html>
